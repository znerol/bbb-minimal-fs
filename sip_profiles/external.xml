<profile name="external">
  <gateways>
    <X-PRE-PROCESS cmd="include" data="external/*.xml"/>
  </gateways>

  <settings>
    <param name="auth-calls" value="false"/>

    <param name="debug" value="0"/>

    <param name="dialplan" value="XML"/>
    <param name="context" value="public"/>
    <param name="codec-prefs" value="$${global_codec_prefs}"/>
    <param name="inbound-late-negotiation" value="true"/>

    <param name="local-network-acl" value="localnet.auto"/>
    <param name="rtp-ip" value="$${local_ip_v4}"/>
    <param name="sip-ip" value="$${local_ip_v4}"/>
    <param name="ext-rtp-ip" value="$${external_rtp_ip}"/>
    <param name="ext-sip-ip" value="$${external_sip_ip}"/>
    <param name="sip-port" value="$${external_sip_port}"/>

    <!-- Drop stale RTP streams -->
    <param name="rtp-timeout-sec" value="300"/>
    <param name="rtp-hold-timeout-sec" value="1800"/>

    <!-- WebSockets for WebRTC signalling -->
    <param name="ws-binding"  value=":5066"/>
    <param name="wss-binding"  value=":7443"/>

    <!-- enable rtcp on every channel also can be done per leg basis with rtcp_audio_interval_msec variable set to passthru to pass it across a call -->
    <param name="rtcp-audio-interval-msec" value="5000"/>
    <param name="rtcp-video-interval-msec" value="5000"/>

    <!-- DTMF for dialin pin-entry -->
    <param name="rfc2833-pt" value="101"/>
    <param name="dtmf-type" value="rfc2833"/>

    <!-- Necessary for transfer from echo-test to conference -->
    <param name="liberal-dtmf" value="true"/>
  </settings>
</profile>
